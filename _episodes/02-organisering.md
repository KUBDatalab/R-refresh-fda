---
# Please do not edit this file directly; it is auto generated.
# Instead, please edit 02-organisering.md in _episodes_rmd/
 title: "organiser dit arbejde"
teaching: 10
exercises: 5
questions:
- "Hvordan kan man lave overskuelig kode"
- "Hvordan kan man nemt dele sin kode"
objectives:
- "Lær at arbejde i projekter i RStudio"
- "Sørg for at din kode er overskuelig"
- "Husk at rydde op i din kode"
keypoints:
- "Lav projekter"
- "Inddel din kode"
- "Gennemgå din kode og ryd op"
source: Rmd
---





# Kode eksekveres sekventielt
Scripts eksekveres linie for linie. Dette betyder at man gerne vil skrive 
scripts som kan køres fra start til slut og give det resultat man ønsker 
uden problemer og fejl.

Når man sidder og programmere er man ikke altid så struktureret og man kan ende 
op med en kode som indeholder unødvendige kodelinier, og en kode som ikke kan 
køres fra start til slut.

Det betyder at det er en god ide fra starten af lære sig selv gode programmerings 
rutiner, selvom det i starten virker omstændeligt, da man jo bare skal skrive et 
lille script, men jo tidligere man starter jo nemmere bliver det når man skal til 
at lave store projekter.

# Saml dit arbejde i projekter
Det kan være en god ide altid at se på en programemrings opgave som et projekt.
Rstudio har en funktionalitet kaldet projekter. Opretter man et projekt, 
opretter man en mappe på sin computer. Denne mappe gør det senere nemt at dele 
sit projekt med andre.

Åbner man efterfølgende projekt filen som ligger i den oprettede mappe, er det 
indenfor denne mappe at R forventer at finde ting.
Dine data og dine scripts.

Arbejd med mere end et projekt. I det øjeblik to opgaver intet har med 
hinanden at gøre, når de kan løses uafhængigt af hinanden, bør man overveje at 
etablere to projekter.

KAN VI LAVE EN GIF DER VISER HVORDAN?

RStudio understøtter at man kan arbejde i projekter. Nogle af fordele ved at 
arbejde i et RStudio projekt er at man samler sit arbejde et sted, lave en 
overskuelig mappestruktur, nemt kan dele hele sit projekt, RStudion holder styr 
på paths

Når man laver en mappestruktur skal man tænke på at holde sine forskellige 
typer data, fx scripts, rå data, manipulerede data, plots, adskildt. Her under 
er et eksempel på en fuldt udbygget mappestruktur. 

BILLEDE AF MAPPE STRUKTUREN

# Inddel din kode i sektioner

## Husk at kommentere


Helt overordnet indgangsbøn - lær af vores fejl.

Arbejdstitel kode.

Kode er sekventiel
 Brug kode til at indlæse data
 Og sådan får du koden til at indlæse data.
Kode skal organiseres.

I projekter
  Med en hensigtsmæssig mappestruktur - den fuldt udfoldede!
Med sektioner og kommentarer
Gerne i mere end script
Og med installation og indlæsning af pakker i starten.
Ryd op i jeres kode til sidst
Hvordan deler man sit projekt? projektfilen er ikke nok!


GIFs lavet med:
https://gifcap.dev/

# Struktur hjælper

Man må helt selv om hvordan man organiserer sine scripts, filer og data.

Men vi har erfaring for at nedenstående tricks gør livet lidt lettere.

## Saml ting i projekter

Rstudio har en funktionalitet kaldet projekter. Opretter man et projekt, 
opretter man en mappe på sin computer. 

Åbner man efterfølgende projektet, er det her R forventer at finde ting.
Dine data og dine scripts.

Arbejd med mere end et projekt. I det øjeblik to opgaver intet har med 
hinanden at gøre, når de kan løses uafhængigt af hinanden, bør man overveje at 
etablere to projekter.

KAN VI LAVE EN GIF DER VISER HVORDAN?


# Brug kode til at indlæse data

Det er fristende at bruge importfunktionen til at indlæse data. Den er også fin.

![Import kræver klik, hver gang](../fig/import_recording.gif)

Men læg mærke til at du hver gang du bruger den, skal klikke. Du skal vælge filen,
du skal træffe valg.

Indlæs i stedet filen med kommandoer i et script:


~~~
library(readxl)
Results_Consumer_Test <- read_excel("R_projekter/R-refresh-fda/data/Results Consumer Test.xlsx")
~~~
{: .language-r}

## Sørg for struktur på mapper i projektet
Opret en mappe til data
Opret en mappe til scripts


## Husk at scripts eksekveres linie for linie.

Og idealet er at I får skrevet et script, som når det 
køres fra start til slut, giver jer de resultater 
i gerne vil have.

Skriv derfor koden i den rækkefølge I mener den skal køres. 
Hvis vi skal 
bruge værdien af en variabel i en beregning - så skal variablen tildeles den
værdi før vi bruger den.

kald til libraries placeres med fordel som det allerførste i scriptet.

Kommentarer er jeres ven.

install.packages() kan være rart at have med i scriptet. Men det er ikke noget
I har brug for at køre hver eneste gang scriptet skal køres. Så udkommenter
de linier kode.

En god praksis kan være:

~~~
# i dette script analyserer jeg hvilke sensoriske parametre der har betydning 
# for vurderingen af smagen af oste.

library(tidyverse)
library(ggbiplot)

df <- read.csv("data/mine_data.csv")

summary(df)

# Ovenstående kode fungerer
# herunder eksperimenterer jeg

eksempelkode
~~~
{: .language-r}


Under kommentaren "herunder eksperimenterer jeg" skriver du kode, ser om den virker
kigger på resultatet og overvejer om det giver mening. Og når du er tilfreds med 
resultatet, flytter du det op over kommentaren "Ovenstående kode fungerer".

Målet er at have script der, når det er færdigt, kan køres linie for linie fra 
start til slut, og give dig de resultater, grafer osv du har brug for.


# sektioner
Det kan være nyttigt også at organisere sin kode i sektioner:

~~~
# indlæs biblioteker ----

# indlæs data ----

# rens data ----


# analyser data ----

# plot data ----
~~~
{: .language-r}

Disse kode sektioner kan "foldes sammen" så de ikke forstyrrer blikket i scriptet.

![Sektioner kan foldes sammen, og bidrage til overblikket](../fig/sections_foldning.gif)

https://swcarpentry.github.io/r-novice-gapminder/02-project-intro/index.html

https://ntguardian.wordpress.com/2018/08/02/how-should-i-organize-my-r-research-projects/

https://kkulma.github.io/2018-03-18-Prime-Hints-for-Running-a-data-project-in-R/

https://www.chrisvoncsefalvay.com/2018/08/09/structuring-r-projects/


{% include links.md %}
