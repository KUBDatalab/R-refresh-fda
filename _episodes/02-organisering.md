---
# Please do not edit this file directly; it is auto generated.
# Instead, please edit 02-organisering.md in _episodes_rmd/
 title: "organiser dit arbejde"
teaching: 10
exercises: 5
questions:
- "Hvordan kan man lave overskuelig kode"
- "Hvordan kan man nemt dele sin kode"
objectives:
- "Lær at arbejde i projekter i RStudio"
- "Sørg for at din kode er overskuelig"
- "Husk at rydde op i din kode"
keypoints:
- "Lav projekter"
- "Inddel din kode"
- "Gennemgå din kode og ryd op"
source: Rmd
---





# Hvad er et script
Et script er en sekvens af instrutioner som oversætter et problem og kommer med et resultat. Gode scripts kan derfor køres fra start til slut og give det ønskede resultat uden problemer og fejl.

Programmeringsprocessen er ikke altid struktureret, men gode scripts kan opnås med gode programmeringsrutiner og oprydning i kode når man er færdig med et script.

Gode programmeringsrutiner kan i starten virke omstændeligt, men jo større programmeringsprojektet er jo vigtigere er det med gode rutiner. Man bestemmer helt selv hvordan man vil programmere, men her kommer nogle tips og tricks som vi med møje har lært gør processen lidt lettere.

# Saml dit arbejde i projekter
Opfat din programmeringsopgave som et projekt. I Rstudio er det muligt at oprette projekter. Når man opretter et projekt i RStudio, så oprettes der en mappe på computeren hvor man gemmer alle scripts, data, plot mv. Denne mappe opfattes nu som projektets "Working directory". Mappen gør det nemt at overskue et projekt og nemt at dele et projekt med andre. 

Arbejd med mere end et projekt. I det øjeblik to opgaver ikke har noget med hinanden at gøre og derfor kan løses uafhængigt af hinanden, bør man overveje at etablere to projekter.

# Mappestruktur
Lav en overskuelig mappestuktur. Strukturen skal holde forskellige typer af data, fx scripts, rå data, manipulerede data, plots, adskildt. Her underer et eksempel på en fuldt udbygget mappestruktur. 

![Mappestruktur](../fig/rstudio_project_files.jpeg)

Det er ikke altid nødvendigt med hele denne struktur, man kan nøjes med de mapper der giver mening for ens projekt.



# Inddel din kode i sektioner

## Husk at kommentere


Helt overordnet indgangsbøn - lær af vores fejl.

Arbejdstitel kode.

Kode er sekventiel
 Brug kode til at indlæse data
 Og sådan får du koden til at indlæse data.
Kode skal organiseres.

I projekter
  Med en hensigtsmæssig mappestruktur - den fuldt udfoldede!
Med sektioner og kommentarer
Gerne i mere end script
Og med installation og indlæsning af pakker i starten.
Ryd op i jeres kode til sidst
Hvordan deler man sit projekt? projektfilen er ikke nok!


GIFs lavet med:
https://gifcap.dev/

# Struktur hjælper



## Saml ting i projekter

Rstudio har en funktionalitet kaldet projekter. Opretter man et projekt, 
opretter man en mappe på sin computer. 

Åbner man efterfølgende projektet, er det her R forventer at finde ting.
Dine data og dine scripts.

Arbejd med mere end et projekt. I det øjeblik to opgaver intet har med 
hinanden at gøre, når de kan løses uafhængigt af hinanden, bør man overveje at 
etablere to projekter.

KAN VI LAVE EN GIF DER VISER HVORDAN?


# Brug kode til at indlæse data

Det er fristende at bruge importfunktionen til at indlæse data. Den er også fin.

![Import kræver klik, hver gang](../fig/import_recording.gif)

Men læg mærke til at du hver gang du bruger den, skal klikke. Du skal vælge filen,
du skal træffe valg.

Indlæs i stedet filen med kommandoer i et script:


~~~
library(readxl)
Results_Consumer_Test <- read_excel("R_projekter/R-refresh-fda/data/Results Consumer Test.xlsx")
~~~
{: .language-r}

## Sørg for struktur på mapper i projektet
Opret en mappe til data
Opret en mappe til scripts


## Husk at scripts eksekveres linie for linie.

Og idealet er at I får skrevet et script, som når det 
køres fra start til slut, giver jer de resultater 
i gerne vil have.

Skriv derfor koden i den rækkefølge I mener den skal køres. 
Hvis vi skal 
bruge værdien af en variabel i en beregning - så skal variablen tildeles den
værdi før vi bruger den.

kald til libraries placeres med fordel som det allerførste i scriptet.

Kommentarer er jeres ven.

install.packages() kan være rart at have med i scriptet. Men det er ikke noget
I har brug for at køre hver eneste gang scriptet skal køres. Så udkommenter
de linier kode.

En god praksis kan være:

~~~
# i dette script analyserer jeg hvilke sensoriske parametre der har betydning 
# for vurderingen af smagen af oste.

library(tidyverse)
library(ggbiplot)

df <- read.csv("data/mine_data.csv")

summary(df)

# Ovenstående kode fungerer
# herunder eksperimenterer jeg

eksempelkode
~~~
{: .language-r}


Under kommentaren "herunder eksperimenterer jeg" skriver du kode, ser om den virker
kigger på resultatet og overvejer om det giver mening. Og når du er tilfreds med 
resultatet, flytter du det op over kommentaren "Ovenstående kode fungerer".

Målet er at have script der, når det er færdigt, kan køres linie for linie fra 
start til slut, og give dig de resultater, grafer osv du har brug for.


# sektioner
Det kan være nyttigt også at organisere sin kode i sektioner:

~~~
# indlæs biblioteker ----

# indlæs data ----

# rens data ----


# analyser data ----

# plot data ----
~~~
{: .language-r}

Disse kode sektioner kan "foldes sammen" så de ikke forstyrrer blikket i scriptet.

![Sektioner kan foldes sammen, og bidrage til overblikket](../fig/sections_foldning.gif)

https://swcarpentry.github.io/r-novice-gapminder/02-project-intro/index.html

https://ntguardian.wordpress.com/2018/08/02/how-should-i-organize-my-r-research-projects/

https://kkulma.github.io/2018-03-18-Prime-Hints-for-Running-a-data-project-in-R/

https://www.chrisvoncsefalvay.com/2018/08/09/structuring-r-projects/


{% include links.md %}
